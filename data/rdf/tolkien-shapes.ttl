@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix kg-ont: <http://tolkien-kg.org/ontology/> .
@prefix schema: <http://schema.org/> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .

kg-ont:CharacterShape a sh:NodeShape ;
    sh:targetClass kg-ont:Character ;
    
    sh:property [
        sh:path schema:name ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        sh:message "Each character must have exactly one name (schema:name)." ;
    ] ;
    
    sh:property [
        sh:path schema:gender ;
        sh:datatype xsd:string ;
        sh:message "Gender must be a string." ;
    ] ;
    
    sh:property [
        sh:path kg-ont:birthDate ;
        sh:datatype xsd:string ;
        sh:message "Birth date must be a string." ;
    ] ;
    
    sh:property [
        sh:path kg-ont:deathDate ;
        sh:datatype xsd:string ;
        sh:message "Death date must be a string." ;
    ] ;
    
    sh:property [
        sh:path kg-ont:family ;
        sh:or (
            [ sh:node kg-ont:HouseShape ]
            [ sh:datatype xsd:string ]
        ) ;
        sh:message "Family must be a House IRI or a string." ;
    ] ;
    
    sh:property [
        sh:path kg-ont:parentage ;
        sh:or (
            [ sh:nodeKind sh:IRI ]
            [ sh:datatype xsd:string ]
        ) ;
        sh:message "Parents must be IRIs or strings." ;
    ] ;
    
    sh:property [
        sh:path kg-ont:children ;
        sh:or (
            [ sh:nodeKind sh:IRI ]
            [ sh:datatype xsd:string ]
        ) ;
        sh:message "Children must be IRIs or strings." ;
    ] ;
    
    sh:property [
        sh:path kg-ont:spouse ;
        sh:or (
            [ sh:nodeKind sh:IRI ]
            [ sh:datatype xsd:string ]
        ) ;
        sh:message "Spouse must be an IRI or a string." ;
    ] ;
    
    sh:property [
        sh:path kg-ont:affiliation ;
        sh:or (
            [ sh:nodeKind sh:IRI ]
            [ sh:datatype xsd:string ]
        ) ;
        sh:message "Affiliation must be either an IRI or a string." ;
    ] ;
    
    sh:property [
        sh:path kg-ont:birthLocation ;
        sh:or (
            [ sh:nodeKind sh:IRI ]
            [ sh:datatype xsd:string ]
        ) ;
        sh:message "Birth location must be either an IRI or a string." ;
    ] ;
    
    sh:property [
        sh:path kg-ont:deathLocation ;
        sh:or (
            [ sh:nodeKind sh:IRI ]
            [ sh:datatype xsd:string ]
        ) ;
        sh:message "Death location must be either an IRI or a string." ;
    ] ;
    
    sh:property [
        sh:path kg-ont:height ;
        sh:datatype xsd:string ;
        sh:message "Height must be a string." ;
    ] ;
    
    sh:property [
        sh:path kg-ont:hairColor ;
        sh:datatype xsd:string ;
        sh:message "Hair color must be a string." ;
    ] ;
    
    sh:property [
        sh:path kg-ont:eyeColor ;
        sh:datatype xsd:string ;
        sh:message "Eye color must be a string." ;
    ] ;
    
    sh:property [
        sh:path kg-ont:weapons ;
        sh:datatype xsd:string ;
        sh:message "Weapons must be described by a string." ;
    ] ;
    
    sh:property [
        sh:path kg-ont:steed ;
        sh:datatype xsd:string ;
        sh:message "Mount must be described by a string." ;
    ] .

kg-ont:HouseShape a sh:NodeShape ;
    sh:targetClass kg-ont:House .

kg-ont:LocationShape a sh:NodeShape ;
    sh:targetClass kg-ont:Location .

kg-ont:CreativeWorkShape a sh:NodeShape ;
    sh:targetClass schema:CreativeWork ;
    
    sh:property [
        sh:path schema:name ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        sh:message "Creative work name must be a string if present." ;
    ] .

kg-ont:ObjectShape a sh:NodeShape ;
    sh:targetClass kg-ont:Object ;
    
    sh:property [
        sh:path schema:name ;
        sh:minCount 1 ;
        sh:datatype xsd:string ;
        sh:message "Each object must have a name." ;
    ] .

kg-ont:RaceShape a sh:NodeShape ;
    sh:targetClass kg-ont:Race ;
    
    sh:property [
        sh:path schema:name ;
        sh:minCount 1 ;
        sh:datatype xsd:string ;
        sh:message "Each race must have a name." ;
    ] .